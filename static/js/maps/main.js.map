{"version":3,"sources":["main.js"],"names":["Completer","guid","data","this","prototype","saveResults","callback","$","post","cssOverrides","question","root","title","questionNumber","navigation","complete","prev","next","progress","progressBar","HandleQuestionUpdate","surveyNode","each","find","index","value","qtype","attr","checked","parents","first","addClass","removeClass","document","ready","srvNd","srvB64","innerText","srvJSONStr","atob","srvMdl","JSON","parse","Survey","defaultBootstrapCss","navigationButton","cssType","completedHtml","questionTitleTemplate","questionNoTemplate","survey","Model","showProgressBar","model","css","onValueChanged","onComplete","srv","dta"],"mappings":"AAKA,GAAIA,WAAY,SAASC,EAAMC,GAC7BC,KAAKF,KAAOA,EACZE,KAAKD,KAAOA,EAMdF,WAAUI,UAAUC,YAAc,SAASC,GACzCC,EAAEC,KAAK,MAAQL,KAAKF,KAAME,KAAKD,KAAM,cASvC,IAAIO,eACFC,UACAC,KAAQ,WACRC,MAAS,SACTC,eAAkB,QAEnBC,YACCC,SAAY,qBACZC,KAAQ,iBACRC,KAAQ,kBAETC,SAAY,kBACZC,YAAe,uBAIZC,qBAAuB,SAAUC,GACnCd,EAAEe,KAAKD,EAAWE,KAAK,2CAA4C,SAAUC,EAAOC,GAClFA,EAAQlB,EAAEkB,EACV,IAAIC,GAAQD,EAAME,KAAK,OACTF,GAAM,GAAGG,SAGrBH,EAAMI,QAAQ,SAASC,QAAQC,SAAS,WACxCN,EAAMI,QAAQ,OAASH,GAAOI,QAAQC,SAAS,aAE/CN,EAAMI,QAAQ,SAASC,QAAQE,YAAY,WAC3CP,EAAMI,QAAQ,OAASH,GAAOI,QAAQE,YAAY,cAIxDzB,GAAE0B,UAAUC,MAAM,WAChB,GAAIC,GAAQ5B,EAAE,+BAAiCuB,QAAQ,GACrDM,EAASD,EAAME,UACfC,EAAaC,KAAKH,GAClBI,EAASC,KAAKC,MAAMJ,GACpBjB,EAAad,EAAE,iBACjBoC,QAAOC,oBAAoBC,iBAAmB,kBAC9CF,OAAOA,OAAOG,QAAU,YACxBN,EAAOO,cAAgB,iCACvBP,EAAOQ,sBAAwB,oBAC/BR,EAAOS,mBAAqB,MAE5B,IAAIC,GAAS,GAAIP,QAAOQ,MAAMX,EAC9BU,GAAOE,gBAAkB,KAGzB,IAAIlD,KAYJmB,GAAWsB,QACTU,MAASH,EACThD,KAAQA,EACRoD,IAAO7C,aACP8C,eAAkB,WAChBnC,qBAAqBC,IAEvBmC,WAAc,SAASC,GACrB,GAAIC,GAAMD,EAAIvD,IACJ,IAAIF,WAAUwC,EAAOvC,KAAMyD,GACjCrD","file":"../main.js","sourcesContent":["/**\n * Does the work of transmitting data\n * @param {*} guid \n * @param {*} data \n */\nvar Completer = function(guid, data) {\n  this.guid = guid;\n  this.data = data;\n};\n\n/**\n * Save the results to the server\n */\nCompleter.prototype.saveResults = function(callback) {\n  $.post('/s/' + this.guid, this.data, function() {\n      \n  });\n};\n\n/**\n * The CSS overrides\n * Documentation: http://surveyjs.org/examples/jquery/survey-customcss.html\n */\nvar cssOverrides = {\n  \"question\": {\n\t\t\"root\": \"question\",\n\t\t\"title\": \"qtitle\",\n\t\t\"questionNumber\": \"qNum\"\n\t},\n\t\"navigation\": {\n\t\t\"complete\": \"navButton complete\",\n\t\t\"prev\": \"navButton prev\",\n\t\t\"next\": \"navButton next\"\n\t},\n\t\"progress\": \"survey-progress\",\n\t\"progressBar\": \"survey-progress-bar\"\n};\n// Controls dynamic behaviors in the survey\n\nvar HandleQuestionUpdate = function (surveyNode) {\n  $.each(surveyNode.find(\"input[type=checkbox], input[type=radio]\"), function (index, value) {\n    value = $(value);\n    var qtype = value.attr(\"type\"),\n      isChecked = value[0].checked;\n      \n    if (isChecked) {\n      value.parents(\"label\").first().addClass(\"checked\");\n      value.parents(\"div.\" + qtype).first().addClass(\"checked\");\n    } else {\n      value.parents(\"label\").first().removeClass(\"checked\");\n      value.parents(\"div.\" + qtype).first().removeClass(\"checked\");\n    }\n  });\n};\n$(document).ready(function () {\n  var srvNd = $(\"script[type=\\\"finer/survey\\\"]\").first()[0],\n    srvB64 = srvNd.innerText,\n    srvJSONStr = atob(srvB64),\n    srvMdl = JSON.parse(srvJSONStr),\n    surveyNode = $(\"#surveyElement\");\n  Survey.defaultBootstrapCss.navigationButton = \"btn btn-primary\";\n  Survey.Survey.cssType = \"bootstrap\";  \n  srvMdl.completedHtml = \"<div class=\\\"completion\\\"></div>\";\n  srvMdl.questionTitleTemplate = \"{title} {require}\";\n  srvMdl.questionNoTemplate = \"{no}\";\n\n  var survey = new Survey.Model(srvMdl);\n  survey.showProgressBar = \"top\";\n  //survey.showQuestionNumbers = false;\n\n  var data = {\n    // Meta data goes here\n  };\n  var surveyValueChanged = function (sender, options) {\n    var el = document.getElementById(options.name);\n    if (el) {\n      el.value = options.value;\n    }\n  };\n\n  \n\n  surveyNode.Survey({    \n    \"model\": survey,\n    \"data\": data,\n    \"css\": cssOverrides,\n    \"onValueChanged\": function() {\n      HandleQuestionUpdate(surveyNode);\n    },\n    \"onComplete\": function(srv) {\n      var dta = srv.data;\n      var cmp = new Completer(srvMdl.guid, dta);\n      cmp.saveResults();\n    }\n  });\n\n});"]}